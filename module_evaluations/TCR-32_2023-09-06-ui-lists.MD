# Module acceptance criteria template

## How to use this form
When performing a technical evaluation of a module, create a copy of this document and use the conventions below to indicate the status of each criterion.  The evaluation results should be placed in the [module_evaluations](https://github.com/folio-org/tech-council/tree/master/module_evaluations) directory and should conform to the following naming convention: `{JIRA Key}_YYYY-MM-DD.MD`, e.g. `TCR-1_2021-11-17.MD`.  The date here is used to differentiate between initial and potential re-evaluation(s).  It should be the date when the evaluation results file was created.

* [x] ACCEPTABLE
* [x] ~INAPPLICABLE~
* [ ] UNACCEPTABLE
  * comments on what was evaluated/not evaluated, why a criterion failed

## [Criteria](https://github.com/folio-org/tech-council/blob/7b10294a5c1c10c7e1a7c5b9f99f04bf07630f06/MODULE_ACCEPTANCE_CRITERIA.MD)

## Shared/Common
* [x] Uses Apache 2.0 license
* [x] Module build MUST produce a valid module descriptor
* [x] Module descriptor MUST include interface requirements for all consumed APIs
* [x] Third party dependencies use an Apache 2.0 compatible license
  * several dependencies licenses are undefined, though not strictly speaking incompatible
* [x] ~Installation documentation is included~
* [x] Personal data form is completed, accurate, and provided as `PERSONAL_DATA_DISCLOSURE.md` file
  * It isn't clear to me that personal data is actually stored/cached in cookies, but they are being transparent about the kinds of data this module handles.
* [x] Sensitive and environment-specific information is not checked into git repository
* [x] Module is written in a language and framework from the [officially approved technologies](https://wiki.folio.org/display/TC/Officially+Supported+Technologies) page
  * In fact there is no list of officially supported front-end languages. This module is written in TypeScript, which is uncommon among front-end modules, but which is nonetheless specifically supported by the UI build tools.
* [x] Module only uses FOLIO interfaces already provided by previously accepted modules _e.g. a UI module cannot be accepted that relies on an interface only provided by a back end module that hasn't been accepted yet_
  * TCRs are open for all modules which provide the interfaces leveraged by this one (TCR-29, TCR-31).
* [x] Module gracefully handles the absence of third party systems or related configuration
* [x] Sonarqube hasn't identified any security issues, major code smells or excessive (>3%) duplication
* [x] Uses [officially supported](https://wiki.folio.org/display/TC/Officially+Supported+Technologies) build tools
* [x] Unit tests have 80% coverage or greater, and are based on [officially approved technologies](https://wiki.folio.org/display/TC/Officially+Supported+Technologies)
  * APIs are mocked via miragejs, which is not the most common way to handle this task.

## Frontend
* [x] If provided, End-to-end tests must be written in an [officially approved technology](https://wiki.folio.org/display/TC/Officially+Supported+Technologies)
  * not provided
* [x] Have i18n support via react-intl and an `en.json` file with English texts
* [x] Have WCAG 2.1 AA compliance as measured by a current major version of axe DevTools Chrome Extension
* [x] Use the latest release of Stripes at the time of evaluation
  * Evaluated against stripes v9 (Poppy), which has not been formally released. Evaluating against v8 (Orchid) would have no value since this would effectively be evaluating a new module for inclusion in a Service Patch for a past release instead of a future one.
* [x] Follow relevant existing UI layouts, patterns and norms
* [x] Must work in the latest version of Chrome (the supported runtime environment) at the time of evaluation


## Backend
* [x] ~Module's repository includes a compliant Module Descriptor~
  * -_note: read more at https://github.com/folio-org/okapi/blob/master/okapi-core/src/main/raml/ModuleDescriptor.json_
* [x] ~Module includes executable implementations of all endpoints in the provides section of the Module Descriptor~
* [x] ~Environment vars are documented in the ModuleDescriptor~
  * -_note: read more at [https://wiki.folio.org/pages/viewpage.action?pageId=65110683](https://wiki.folio.org/pages/viewpage.action?pageId=65110683)_
* [x] ~If a module provides interfaces intended to be consumed by other FOLIO Modules, they must be defined in the Module Descriptor "provides" section~
* [x] ~All API endpoints are documented in RAML or OpenAPI~
* [x] ~All API endpoints protected with appropriate permissions as per the following guidelines and recommendations, e.g. avoid using `*.all` permissions, all necessary module permissions are assigned, etc.~
  * -_note: read more at https://dev.folio.org/guidelines/naming-conventions/ and https://wiki.folio.org/display/DD/Permission+Set+Guidelines_
* [x] ~Module provides reference data (if applicable), e.g. if there is a controlled vocabulary where the module requires at least one value~
* [x] ~If provided, integration (API) tests must be written in an [officially approved technology](https://wiki.folio.org/display/TC/Officially+Supported+Technologies)~
  * -_note: while it's strongly recommended that modules implement integration tests, it's not a requirement_
  * -_note: these tests are defined in https://github.com/folio-org/folio-integration-tests_
* [x] ~Data is segregated by tenant at the storage layer~
* [x] ~The module doesn't access data in DB schemas other than its own and public~
* [x] ~The module responds with a tenant's content based on x-okapi-tenant header~
* [x] ~Standard GET `/admin/health` endpoint returning a 200 response~
  * -_note: read more at https://wiki.folio.org/display/DD/Back+End+Module+Health+Check+Protocol_
* [x] ~High Availability (HA) compliant~
  * Possible red flags:
    * Connection affinity / sticky sessions / etc. are used
    * Local container storage is used
    * Services are stateful
* [x] ~Module only uses infrastructure / platform technologies on the [officially approved technologies](https://wiki.folio.org/display/TC/Officially+Supported+Technologies) list.~
  * _e.g. PostgreSQL, ElasticSearch, etc._

## TCR Process Improvements
* TypeScript is a superset of JavaScript. TC should make an explicit statement about whether it is permitted in FOLIO modules.
* We should have recommended tools for evaluating license compliance and not ask evaluators to assess license compliance
* This "Use the latest release of Stripes at the time of evaluation" criterion is problematic; we want to evaluate modules against the collection of versions they are _going_ to be a part of if they are accepted rather than the versions that were part of a previous release. On other hand, just as we ask for a specific commit from submitters in order to avoid the moving target of the main branch, it would be unfair to expect submitters to reference our moving targets. The officially approved technologies page may provide some guidance here, but then we also have to make sure it is accurate and up to date.
